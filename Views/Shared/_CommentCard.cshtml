@model NLPHelpDesk.Models.Comment;

<article class="card m-3 shadow-sm border-0 ">
    <header class="card-header bg-info text-white d-flex align-items-center">
        <div>
            <h6 class="mb-0 fw-semibold">@Model.AppUser.FirstName @Model.AppUser.LastName</h6>
            <small class="text-light">@Model.CreateDate</small>
        </div>
    </header>
    <div class="card-body bg-light text-dark p-3">
        <p class="mb-0">@Model.CommentText</p>
        @if (!string.IsNullOrEmpty(Model.FileUrl))
        {
            <div class="mt-2">
                @if (Model.FileType == ".jpg" || Model.FileType == ".jpeg" || Model.FileType == ".png")
                {
                    <img src="@Model.FileUrl" alt="Attached image" class="img-thumbnail" style="max-width: 200px; cursor: pointer;" data-bs-toggle="modal" data-bs-target="#imageModal"/>
                    <a href="@Model.FileUrl" target="_blank" download>@Model.FileName</a>

                    <!-- Modal -->
                    <div class="modal fade" id="imageModal" tabindex="-1" aria-labelledby="imageModalLabel" aria-hidden="true">
                        <div class="modal-dialog modal-xl modal-dialog-centered">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                </div>
                                <div class="modal-body text-center">
                                    <img src="@Model.FileUrl" alt="Attached image" class="img-fluid" style="max-height: 90vh;"/>
                                </div>
                            </div>
                        </div>
                    </div>
                }
                else
                {
                    <a href="@Model.FileUrl" target="_blank" download>@Model.FileName</a>
                }
            </div>
        }
    </div>
    </article>